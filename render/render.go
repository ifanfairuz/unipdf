//
// Copyright 2020 FoxyUtils ehf. All rights reserved.
//
// This is a commercial product and requires a license to operate.
// A trial license can be obtained at https://unidoc.io
//
// DO NOT EDIT: generated by unitwist Go source code obfuscator.
//
// Use of this source code is governed by the UniDoc End User License Agreement
// terms that can be accessed at https://unidoc.io/eula/

package render ;import (_a "errors";_dd "fmt";_ac "github.com/adrg/sysfont";_b "github.com/ifanfairuz/unipdf/v3/annotator";_aaf "github.com/ifanfairuz/unipdf/v3/common";_eg "github.com/ifanfairuz/unipdf/v3/contentstream";_gd "github.com/ifanfairuz/unipdf/v3/contentstream/draw";
_aa "github.com/ifanfairuz/unipdf/v3/core";_fg "github.com/ifanfairuz/unipdf/v3/internal/license";_fb "github.com/ifanfairuz/unipdf/v3/internal/transform";_ggb "github.com/ifanfairuz/unipdf/v3/model";_fe "github.com/ifanfairuz/unipdf/v3/render/internal/context";_cd "github.com/ifanfairuz/unipdf/v3/render/internal/context/imagerender";
_gc "golang.org/x/image/draw";_gg "image";_ae "image/color";_f "image/draw";_da "image/jpeg";_fa "image/png";_ga "math";_d "os";_e "path/filepath";_g "strings";);func (_egg renderer )renderPage (_eb _fe .Context ,_ebd *_ggb .PdfPage ,_dgd _fb .Matrix ,_cb bool )error {if !_cb {_ggc :=_ggb .FieldFlattenOpts {AnnotFilterFunc :func (_ffd *_ggb .PdfAnnotation )bool {switch _ffd .GetContext ().(type ){case *_ggb .PdfAnnotationLine :return true ;
case *_ggb .PdfAnnotationSquare :return true ;case *_ggb .PdfAnnotationCircle :return true ;case *_ggb .PdfAnnotationPolygon :return true ;case *_ggb .PdfAnnotationPolyLine :return true ;};return false ;}};_ddf :=_b .FieldAppearance {};_fea :=_ebd .FlattenFieldsWithOpts (_ddf ,&_ggc );
if _fea !=nil {_aaf .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0064u\u0072\u0069n\u0067\u0020\u0061\u006e\u006e\u006f\u0074\u0061t\u0069\u006f\u006e\u0020\u0066\u006c\u0061\u0074\u0074\u0065\u006e\u0069n\u0067\u0020\u0025\u0076",_fea );};};_fac ,_eecb :=_ebd .GetAllContentStreams ();
if _eecb !=nil {return _eecb ;};if _de :=_dgd ;!_de .Identity (){_fac =_dd .Sprintf ("%\u002e\u0032\u0066\u0020\u0025\u002e2\u0066\u0020\u0025\u002e\u0032\u0066 \u0025\u002e\u0032\u0066\u0020\u0025\u002e2\u0066\u0020\u0025\u002e\u0032\u0066\u0020\u0063\u006d\u0020%\u0073",_de [0],_de [1],_de [3],_de [4],_de [6],_de [7],_fac );
};_eb .Translate (0,float64 (_eb .Height ()));_eb .Scale (1,-1);_eb .Push ();_eb .SetRGBA (1,1,1,1);_eb .DrawRectangle (0,0,float64 (_eb .Width ()),float64 (_eb .Height ()));_eb .Fill ();_eb .Pop ();_eb .SetLineWidth (1.0);_eb .SetRGBA (0,0,0,1);return _egg .renderContentStream (_eb ,_fac ,_ebd .Resources );
};type renderer struct{_fbd float64 };func _eee (_cdfc _fe .Gradient ,_baee *_ggb .PdfFunctionType2 ,_cdc _ggb .PdfColorspace ,_cegb float64 ,_cadg bool )(_fe .Gradient ,error ){switch _cdc .(type ){case *_ggb .PdfColorspaceDeviceRGB :if len (_baee .C0 )!=3||len (_baee .C1 )!=3{return nil ,_a .New ("\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063\u0074\u0020\u0052\u0047\u0042\u0020\u0063o\u006co\u0072\u0020\u0061\u0072\u0072\u0061\u0079\u0020\u006c\u0065\u006e\u0067\u0074\u0068");
};_bea :=_baee .C0 ;_fgeg :=_baee .C1 ;if _cadg {_cdfc .AddColorStop (0.0,_ae .RGBA {R :uint8 (_bea [0]*255),G :uint8 (_bea [1]*255),B :uint8 (_bea [2]*255),A :255});};_cdfc .AddColorStop (_cegb ,_ae .RGBA {R :uint8 (_fgeg [0]*255),G :uint8 (_fgeg [1]*255),B :uint8 (_fgeg [2]*255),A :255});
case *_ggb .PdfColorspaceDeviceCMYK :if len (_baee .C0 )!=4||len (_baee .C1 )!=4{return nil ,_a .New ("\u0069\u006e\u0063\u006f\u0072\u0072e\u0063\u0074\u0020\u0043\u004d\u0059\u004b\u0020\u0063\u006f\u006c\u006f\u0072 \u0061\u0072\u0072\u0061\u0079\u0020\u006ce\u006e\u0067\u0074\u0068");
};_fbdab :=_baee .C0 ;_ddb :=_baee .C1 ;if _cadg {_cdfc .AddColorStop (0.0,_ae .CMYK {C :uint8 (_fbdab [0]*255),M :uint8 (_fbdab [1]*255),Y :uint8 (_fbdab [2]*255),K :uint8 (_fbdab [3]*255)});};_cdfc .AddColorStop (_cegb ,_ae .CMYK {C :uint8 (_ddb [0]*255),M :uint8 (_ddb [1]*255),Y :uint8 (_ddb [2]*255),K :uint8 (_ddb [3]*255)});
default:return nil ,_dd .Errorf ("u\u006e\u0073\u0075\u0070\u0070\u006fr\u0074\u0065\u0064\u0020\u0063\u006f\u006c\u006f\u0072 \u0073\u0070\u0061c\u0065:\u0020\u0025\u0073",_cdc .String ());};return _cdfc ,nil ;};var (_gb =_a .New ("\u0074\u0079p\u0065\u0020\u0063h\u0065\u0063\u006b\u0020\u0065\u0072\u0072\u006f\u0072");
_eec =_a .New ("\u0072\u0061\u006e\u0067\u0065\u0020\u0063\u0068\u0065\u0063\u006b\u0020e\u0072\u0072\u006f\u0072"););func _ggag (_gde string ,_bbfda _gg .Image ,_cddc int )error {_bgcc ,_bbbe :=_d .Create (_gde );if _bbbe !=nil {return _bbbe ;};defer _bgcc .Close ();
return _da .Encode (_bgcc ,_bbfda ,&_da .Options {Quality :_cddc });};func _baeee (_dafc ,_eca _gg .Image )_gg .Image {_bdb ,_ecag :=_eca .Bounds ().Size (),_dafc .Bounds ().Size ();_eaa ,_ccgg :=_bdb .X ,_bdb .Y ;if _ecag .X > _eaa {_eaa =_ecag .X ;};
if _ecag .Y > _ccgg {_ccgg =_ecag .Y ;};_dcaa :=_gg .Rect (0,0,_eaa ,_ccgg );if _bdb .X !=_eaa ||_bdb .Y !=_ccgg {_acgg :=_gg .NewRGBA (_dcaa );_gc .BiLinear .Scale (_acgg ,_dcaa ,_dafc ,_eca .Bounds (),_gc .Over ,nil );_eca =_acgg ;};if _ecag .X !=_eaa ||_ecag .Y !=_ccgg {_gbfa :=_gg .NewRGBA (_dcaa );
_gc .BiLinear .Scale (_gbfa ,_dcaa ,_dafc ,_dafc .Bounds (),_gc .Over ,nil );_dafc =_gbfa ;};_ddfc :=_gg .NewRGBA (_dcaa );_gc .DrawMask (_ddfc ,_dcaa ,_dafc ,_gg .Point {},_eca ,_gg .Point {},_gc .Over );return _ddfc ;};func (_bg renderer )renderContentStream (_bb _fe .Context ,_bbg string ,_eeb *_ggb .PdfPageResources )error {_bbb ,_cga :=_eg .NewContentStreamParser (_bbg ).Parse ();
if _cga !=nil {return _cga ;};_gf :=_bb .TextState ();_gf .GlobalScale =_bg ._fbd ;_bf :=map[string ]*_fe .TextFont {};_edg :=_ac .NewFinder (&_ac .FinderOpts {Extensions :[]string {"\u002e\u0074\u0074\u0066","\u002e\u0074\u0074\u0063"}});var _aea *_eg .ContentStreamOperation ;
_bca :=_eg .NewContentStreamProcessor (*_bbb );_bca .AddHandler (_eg .HandlerConditionEnumAllOperands ,"",func (_be *_eg .ContentStreamOperation ,_fcb _eg .GraphicsState ,_ab *_ggb .PdfPageResources )error {_aaf .Log .Debug ("\u0050\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0025\u0073",_be .Operand );
switch _be .Operand {case "\u0071":_bb .Push ();case "\u0051":_bb .Pop ();_gf =_bb .TextState ();case "\u0063\u006d":if len (_be .Params )!=6{return _eec ;};_bce ,_ged :=_aa .GetNumbersAsFloat (_be .Params );if _ged !=nil {return _ged ;};_gbf :=_fb .NewMatrix (_bce [0],_bce [1],_bce [2],_bce [3],_bce [4],_bce [5]);
_aaf .Log .Debug ("\u0047\u0072\u0061\u0070\u0068\u0069\u0063\u0073\u0020\u0073\u0074a\u0074\u0065\u0020\u006d\u0061\u0074\u0072\u0069\u0078\u003a \u0025\u002b\u0076",_gbf );_bb .SetMatrix (_bb .Matrix ().Mult (_gbf ));case "\u0077":if len (_be .Params )!=1{return _eec ;
};_aagd ,_bcd :=_aa .GetNumbersAsFloat (_be .Params );if _bcd !=nil {return _bcd ;};_bb .SetLineWidth (_aagd [0]);case "\u004a":if len (_be .Params )!=1{return _eec ;};_ecf ,_acg :=_aa .GetIntVal (_be .Params [0]);if !_acg {return _gb ;};switch _ecf {case 0:_bb .SetLineCap (_fe .LineCapButt );
case 1:_bb .SetLineCap (_fe .LineCapRound );case 2:_bb .SetLineCap (_fe .LineCapSquare );default:_aaf .Log .Debug ("\u0049\u006e\u0076\u0061\u006c\u0069\u0064\u0020\u006c\u0069\u006ee\u0020\u0063\u0061\u0070\u0020\u0073\u0074\u0079\u006c\u0065:\u0020\u0025\u0064",_ecf );
return _eec ;};case "\u006a":if len (_be .Params )!=1{return _eec ;};_acc ,_bd :=_aa .GetIntVal (_be .Params [0]);if !_bd {return _gb ;};switch _acc {case 0:_bb .SetLineJoin (_fe .LineJoinBevel );case 1:_bb .SetLineJoin (_fe .LineJoinRound );case 2:_bb .SetLineJoin (_fe .LineJoinBevel );
default:_aaf .Log .Debug ("I\u006e\u0076\u0061\u006c\u0069\u0064 \u006c\u0069\u006e\u0065\u0020\u006a\u006f\u0069\u006e \u0073\u0074\u0079l\u0065:\u0020\u0025\u0064",_acc );return _eec ;};case "\u004d":if len (_be .Params )!=1{return _eec ;};_cbg ,_fd :=_aa .GetNumbersAsFloat (_be .Params );
if _fd !=nil {return _fd ;};_ =_cbg ;_aaf .Log .Debug ("\u004di\u0074\u0065\u0072\u0020l\u0069\u006d\u0069\u0074\u0020n\u006ft\u0020s\u0075\u0070\u0070\u006f\u0072\u0074\u0065d");case "\u0064":if len (_be .Params )!=2{return _eec ;};_aaee ,_ef :=_aa .GetArray (_be .Params [0]);
if !_ef {return _gb ;};_daa ,_ef :=_aa .GetIntVal (_be .Params [1]);if !_ef {_ ,_gef :=_aa .GetFloatVal (_be .Params [1]);if !_gef {return _gb ;};};_beg ,_bbc :=_aa .GetNumbersAsFloat (_aaee .Elements ());if _bbc !=nil {return _bbc ;};_bb .SetDash (_beg ...);
_ =_daa ;_aaf .Log .Debug ("\u004c\u0069n\u0065\u0020\u0064\u0061\u0073\u0068\u0020\u0070\u0068\u0061\u0073\u0065\u0020\u006e\u006f\u0074\u0020\u0073\u0075\u0070\u0070\u006frt\u0065\u0064");case "\u0072\u0069":_aaf .Log .Debug ("\u0052\u0065\u006e\u0064\u0065\u0072\u0069\u006e\u0067\u0020i\u006e\u0074\u0065\u006e\u0074\u0020\u006eo\u0074\u0020\u0073\u0075\u0070\u0070\u006f\u0072\u0074\u0065\u0064");
case "\u0069":_aaf .Log .Debug ("\u0046\u006c\u0061\u0074\u006e\u0065\u0073\u0073\u0020\u0074\u006f\u006c\u0065\u0072\u0061n\u0063e\u0020\u006e\u006f\u0074\u0020\u0073\u0075\u0070\u0070\u006f\u0072\u0074\u0065\u0064");case "\u0067\u0073":if len (_be .Params )!=1{return _eec ;
};_gaee ,_eedc :=_aa .GetName (_be .Params [0]);if !_eedc {return _gb ;};if _gaee ==nil {return _eec ;};_cde ,_eedc :=_ab .GetExtGState (*_gaee );if !_eedc {_aaf .Log .Debug ("\u0045\u0052\u0052OR\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006eo\u0074 \u0066i\u006ed\u0020\u0072\u0065\u0073\u006f\u0075\u0072\u0063\u0065\u003a\u0020\u0025\u0073",*_gaee );
return _a .New ("\u0072e\u0073o\u0075\u0072\u0063\u0065\u0020n\u006f\u0074 \u0066\u006f\u0075\u006e\u0064");};_dca ,_eedc :=_aa .GetDict (_cde );if !_eedc {_aaf .Log .Debug ("\u0045\u0052RO\u0052\u003a\u0020c\u006f\u0075\u006c\u0064 ge\u0074 g\u0072\u0061\u0070\u0068\u0069\u0063\u0073 s\u0074\u0061\u0074\u0065\u0020\u0064\u0069c\u0074");
return _gb ;};_aaf .Log .Debug ("G\u0053\u0020\u0064\u0069\u0063\u0074\u003a\u0020\u0025\u0073",_dca .String ());case "\u006d":if len (_be .Params )!=2{_aaf .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006d\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0073\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_eec );
return nil ;};_gab ,_db :=_aa .GetNumbersAsFloat (_be .Params );if _db !=nil {return _db ;};_aaf .Log .Debug ("M\u006f\u0076\u0065\u0020\u0074\u006f\u003a\u0020\u0025\u0076",_gab );_bb .NewSubPath ();_bb .MoveTo (_gab [0],_gab [1]);case "\u006c":if len (_be .Params )!=2{_aaf .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0065\u0072\u0072o\u0072\u0020\u0077\u0068\u0069\u006c\u0065\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0060\u006c\u0060\u0020o\u0070\u0065r\u0061\u0074o\u0072\u003a\u0020\u0025\u0073\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074 m\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e",_eec );
return nil ;};_ad ,_bbcf :=_aa .GetNumbersAsFloat (_be .Params );if _bbcf !=nil {return _bbcf ;};_bb .LineTo (_ad [0],_ad [1]);case "\u0063":if len (_be .Params )!=6{return _eec ;};_cda ,_cge :=_aa .GetNumbersAsFloat (_be .Params );if _cge !=nil {return _cge ;
};_aaf .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020\u0062\u0065\u007a\u0069\u0065\u0072\u0020p\u0061\u0072\u0061\u006d\u0073\u003a\u0020\u0025\u002b\u0076",_cda );_bb .CubicTo (_cda [0],_cda [1],_cda [2],_cda [3],_cda [4],_cda [5]);case "\u0076","\u0079":if len (_be .Params )!=4{return _eec ;
};_aga ,_gac :=_aa .GetNumbersAsFloat (_be .Params );if _gac !=nil {return _gac ;};_aaf .Log .Debug ("\u0043u\u0062\u0069\u0063\u0020\u0062\u0065\u007a\u0069\u0065\u0072\u0020p\u0061\u0072\u0061\u006d\u0073\u003a\u0020\u0025\u002b\u0076",_aga );_bb .QuadraticTo (_aga [0],_aga [1],_aga [2],_aga [3]);
case "\u0068":_bb .ClosePath ();_bb .NewSubPath ();case "\u0072\u0065":if len (_be .Params )!=4{return _eec ;};_bgc ,_bbcb :=_aa .GetNumbersAsFloat (_be .Params );if _bbcb !=nil {return _bbcb ;};_bb .DrawRectangle (_bgc [0],_bgc [1],_bgc [2],_bgc [3]);
_bb .NewSubPath ();case "\u0053":_facb ,_agd :=_fcb .ColorspaceStroking .ColorToRGB (_fcb .ColorStroking );if _agd !=nil {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_agd );
return _agd ;};_daf ,_aage :=_facb .(*_ggb .PdfColorDeviceRGB );if !_aage {_aaf .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _agd ;};_bb .SetRGBA (_daf .R (),_daf .G (),_daf .B (),1);
_bb .Stroke ();case "\u0073":_cfa ,_ebe :=_fcb .ColorspaceStroking .ColorToRGB (_fcb .ColorStroking );if _ebe !=nil {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ebe );
return _ebe ;};_ggg ,_aeb :=_cfa .(*_ggb .PdfColorDeviceRGB );if !_aeb {_aaf .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _ebe ;};_bb .ClosePath ();_bb .NewSubPath ();
_bb .SetRGBA (_ggg .R (),_ggg .G (),_ggg .B (),1);_bb .Stroke ();case "\u0066","\u0046":_cfe ,_bec :=_fcb .ColorspaceNonStroking .ColorToRGB (_fcb .ColorNonStroking );if _bec !=nil {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bec );
return _bec ;};switch _bee :=_cfe .(type ){case *_ggb .PdfColorDeviceRGB :_bb .SetRGBA (_bee .R (),_bee .G (),_bee .B (),1);_bb .SetFillRule (_fe .FillRuleWinding );_bb .Fill ();case *_ggb .PdfColorPattern :_bb .Fill ();};_aaf .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");
case "\u0066\u002a":_fecf ,_agc :=_fcb .ColorspaceNonStroking .ColorToRGB (_fcb .ColorNonStroking );if _agc !=nil {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_agc );
return _agc ;};_fge ,_aca :=_fecf .(*_ggb .PdfColorDeviceRGB );if !_aca {_aaf .Log .Debug ("\u0045\u0072\u0072\u006fr \u0063\u006f\u006e\u0076\u0065\u0072\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006co\u0072");return _agc ;};_bb .SetRGBA (_fge .R (),_fge .G (),_fge .B (),1);
_bb .SetFillRule (_fe .FillRuleEvenOdd );_bb .Fill ();case "\u0042":_bcc ,_gbb :=_fcb .ColorspaceNonStroking .ColorToRGB (_fcb .ColorNonStroking );if _gbb !=nil {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gbb );
return _gbb ;};switch _gfd :=_bcc .(type ){case *_ggb .PdfColorDeviceRGB :_bb .SetRGBA (_gfd .R (),_gfd .G (),_gfd .B (),1);_bb .SetFillRule (_fe .FillRuleWinding );_bb .FillPreserve ();_bcc ,_gbb =_fcb .ColorspaceStroking .ColorToRGB (_fcb .ColorStroking );
if _gbb !=nil {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gbb );return _gbb ;};if _cbd ,_gdb :=_bcc .(*_ggb .PdfColorDeviceRGB );
_gdb {_bb .SetRGBA (_cbd .R (),_cbd .G (),_cbd .B (),1);_bb .Stroke ();};case *_ggb .PdfColorPattern :_bb .SetFillRule (_fe .FillRuleWinding );_bb .Fill ();_bb .StrokePattern ();};case "\u0042\u002a":_gge ,_cdg :=_fcb .ColorspaceNonStroking .ColorToRGB (_fcb .ColorNonStroking );
if _cdg !=nil {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cdg );return _cdg ;};switch _agda :=_gge .(type ){case *_ggb .PdfColorDeviceRGB :_bb .SetRGBA (_agda .R (),_agda .G (),_agda .B (),1);
_bb .SetFillRule (_fe .FillRuleEvenOdd );_bb .FillPreserve ();_gge ,_cdg =_fcb .ColorspaceStroking .ColorToRGB (_fcb .ColorStroking );if _cdg !=nil {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cdg );
return _cdg ;};if _efa ,_dec :=_gge .(*_ggb .PdfColorDeviceRGB );_dec {_bb .SetRGBA (_efa .R (),_efa .G (),_efa .B (),1);_bb .Stroke ();};case *_ggb .PdfColorPattern :_bb .SetFillRule (_fe .FillRuleEvenOdd );_bb .Fill ();_bb .StrokePattern ();};case "\u0062":_bb .ClosePath ();
_aed ,_efg :=_fcb .ColorspaceNonStroking .ColorToRGB (_fcb .ColorNonStroking );if _efg !=nil {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_efg );
return _efg ;};switch _cgab :=_aed .(type ){case *_ggb .PdfColorDeviceRGB :_bb .SetRGBA (_cgab .R (),_cgab .G (),_cgab .B (),1);_bb .NewSubPath ();_bb .SetFillRule (_fe .FillRuleWinding );_bb .FillPreserve ();_aed ,_efg =_fcb .ColorspaceStroking .ColorToRGB (_fcb .ColorStroking );
if _efg !=nil {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_efg );return _efg ;};if _dab ,_bfb :=_aed .(*_ggb .PdfColorDeviceRGB );
_bfb {_bb .SetRGBA (_dab .R (),_dab .G (),_dab .B (),1);_bb .Stroke ();};case *_ggb .PdfColorPattern :_bb .NewSubPath ();_bb .SetFillRule (_fe .FillRuleWinding );_bb .Fill ();_bb .StrokePattern ();};case "\u0062\u002a":_bb .ClosePath ();_agce ,_bbd :=_fcb .ColorspaceNonStroking .ColorToRGB (_fcb .ColorNonStroking );
if _bbd !=nil {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bbd );return _bbd ;};switch _gcc :=_agce .(type ){case *_ggb .PdfColorDeviceRGB :_bb .SetRGBA (_gcc .R (),_gcc .G (),_gcc .B (),1);
_bb .NewSubPath ();_bb .SetFillRule (_fe .FillRuleEvenOdd );_bb .FillPreserve ();_agce ,_bbd =_fcb .ColorspaceStroking .ColorToRGB (_fcb .ColorStroking );if _bbd !=nil {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_bbd );
return _bbd ;};if _cec ,_gaf :=_agce .(*_ggb .PdfColorDeviceRGB );_gaf {_bb .SetRGBA (_cec .R (),_cec .G (),_cec .B (),1);_bb .Stroke ();};case *_ggb .PdfColorPattern :_bb .NewSubPath ();_bb .SetFillRule (_fe .FillRuleEvenOdd );_bb .Fill ();_bb .StrokePattern ();
};case "\u006e":_bb .ClearPath ();case "\u0057":_bb .SetFillRule (_fe .FillRuleWinding );_bb .ClipPreserve ();case "\u0057\u002a":_bb .SetFillRule (_fe .FillRuleEvenOdd );_bb .ClipPreserve ();case "\u0072\u0067":_ccc ,_aad :=_fcb .ColorNonStroking .(*_ggb .PdfColorDeviceRGB );
if !_aad {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fcb .ColorNonStroking );return nil ;};_bb .SetFillRGBA (_ccc .R (),_ccc .G (),_ccc .B (),1);
case "\u0052\u0047":_aagf ,_cab :=_fcb .ColorStroking .(*_ggb .PdfColorDeviceRGB );if !_cab {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fcb .ColorStroking );
return nil ;};_bb .SetStrokeRGBA (_aagf .R (),_aagf .G (),_aagf .B (),1);case "\u006b":_acaf ,_bfc :=_fcb .ColorNonStroking .(*_ggb .PdfColorDeviceCMYK );if !_bfc {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fcb .ColorNonStroking );
return nil ;};_ccca ,_gff :=_fcb .ColorspaceNonStroking .ColorToRGB (_acaf );if _gff !=nil {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fcb .ColorNonStroking );
return nil ;};_feg ,_bfc :=_ccca .(*_ggb .PdfColorDeviceRGB );if !_bfc {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_ccca );return nil ;
};_bb .SetFillRGBA (_feg .R (),_feg .G (),_feg .B (),1);case "\u004b":_gdbb ,_acga :=_fcb .ColorStroking .(*_ggb .PdfColorDeviceCMYK );if !_acga {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fcb .ColorStroking );
return nil ;};_fbde ,_eba :=_fcb .ColorspaceStroking .ColorToRGB (_gdbb );if _eba !=nil {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fcb .ColorStroking );
return nil ;};_df ,_acga :=_fbde .(*_ggb .PdfColorDeviceRGB );if !_acga {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fbde );return nil ;
};_bb .SetStrokeRGBA (_df .R (),_df .G (),_df .B (),1);case "\u0067":_bcg ,_fgc :=_fcb .ColorNonStroking .(*_ggb .PdfColorDeviceGray );if !_fgc {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fcb .ColorNonStroking );
return nil ;};_fff ,_ffa :=_fcb .ColorspaceNonStroking .ColorToRGB (_bcg );if _ffa !=nil {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fcb .ColorNonStroking );
return nil ;};_dcb ,_fgc :=_fff .(*_ggb .PdfColorDeviceRGB );if !_fgc {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fff );return nil ;
};_bb .SetFillRGBA (_dcb .R (),_dcb .G (),_dcb .B (),1);case "\u0047":_bced ,_ceg :=_fcb .ColorStroking .(*_ggb .PdfColorDeviceGray );if !_ceg {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fcb .ColorStroking );
return nil ;};_gdg ,_afd :=_fcb .ColorspaceStroking .ColorToRGB (_bced );if _afd !=nil {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fcb .ColorStroking );
return nil ;};_adc ,_ceg :=_gdg .(*_ggb .PdfColorDeviceRGB );if !_ceg {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gdg );return nil ;
};_bb .SetStrokeRGBA (_adc .R (),_adc .G (),_adc .B (),1);case "\u0063\u0073":if len (_be .Params )> 0{if _fcf ,_acb :=_aa .GetName (_be .Params [0]);_acb &&_fcf .String ()=="\u0050a\u0074\u0074\u0065\u0072\u006e"{break ;};};_agaa ,_cae :=_fcb .ColorspaceNonStroking .ColorToRGB (_fcb .ColorNonStroking );
if _cae !=nil {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fcb .ColorNonStroking );return nil ;};_bfe ,_cdf :=_agaa .(*_ggb .PdfColorDeviceRGB );
if !_cdf {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_agaa );return nil ;};_bb .SetFillRGBA (_bfe .R (),_bfe .G (),_bfe .B (),1);
case "\u0073\u0063":_gba ,_ded :=_fcb .ColorspaceNonStroking .ColorToRGB (_fcb .ColorNonStroking );if _ded !=nil {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fcb .ColorNonStroking );
return nil ;};_bdc ,_dfd :=_gba .(*_ggb .PdfColorDeviceRGB );if !_dfd {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_gba );return nil ;
};_bb .SetFillRGBA (_bdc .R (),_bdc .G (),_bdc .B (),1);case "\u0073\u0063\u006e":if len (_be .Params )> 0&&len (_aea .Params )> 0{if _dgb ,_begd :=_aa .GetName (_aea .Params [0]);_begd &&_dgb .String ()=="\u0050a\u0074\u0074\u0065\u0072\u006e"{if _bdf ,_bab :=_aa .GetName (_be .Params [0]);
_bab {_faa ,_bad :=_bg .processGradient (_bb ,_be ,_ab ,_bdf );if _bad !=nil {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0077\u0068\u0065\u006e\u0020\u0070\u0072o\u0063\u0065\u0073\u0073\u0069\u006eg\u0020\u0067\u0072\u0061\u0064\u0069\u0065\u006e\u0074\u0020\u0064\u0061\u0074a\u003a\u0020\u0025\u0076",_bad );
break ;};if _faa ==nil {_aaf .Log .Debug ("\u0055\u006ek\u006e\u006f\u0077n\u0020\u0067\u0072\u0061\u0064\u0069\u0065\u006e\u0074");break ;};_bb .SetFillStyle (_faa );_bb .SetStrokeStyle (_faa );break ;};};};_def ,_gaeeg :=_fcb .ColorspaceNonStroking .ColorToRGB (_fcb .ColorNonStroking );
if _gaeeg !=nil {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fcb .ColorNonStroking );return nil ;};_gfdg ,_dbe :=_def .(*_ggb .PdfColorDeviceRGB );
if !_dbe {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_def );return nil ;};_bb .SetFillRGBA (_gfdg .R (),_gfdg .G (),_gfdg .B (),1);
case "\u0043\u0053":if len (_be .Params )> 0{if _ade ,_bef :=_aa .GetName (_be .Params [0]);_bef &&_ade .String ()=="\u0050a\u0074\u0074\u0065\u0072\u006e"{break ;};};_dff ,_gabf :=_fcb .ColorspaceStroking .ColorToRGB (_fcb .ColorStroking );if _gabf !=nil {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fcb .ColorStroking );
return nil ;};_bbf ,_dgf :=_dff .(*_ggb .PdfColorDeviceRGB );if !_dgf {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_dff );return nil ;
};_bb .SetStrokeRGBA (_bbf .R (),_bbf .G (),_bbf .B (),1);case "\u0053\u0043":_fbc ,_efd :=_fcb .ColorspaceStroking .ColorToRGB (_fcb .ColorStroking );if _efd !=nil {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fcb .ColorStroking );
return nil ;};_fgec ,_dge :=_fbc .(*_ggb .PdfColorDeviceRGB );if !_dge {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fbc );return nil ;
};_bb .SetStrokeRGBA (_fgec .R (),_fgec .G (),_fgec .B (),1);case "\u0053\u0043\u004e":if len (_be .Params )> 0&&len (_aea .Params )> 0{if _fgb ,_gcf :=_aa .GetName (_aea .Params [0]);_gcf &&_fgb .String ()=="\u0050a\u0074\u0074\u0065\u0072\u006e"{if _ecc ,_afa :=_aa .GetName (_be .Params [0]);
_afa {_gfa ,_dbb :=_bg .processGradient (_bb ,_be ,_ab ,_ecc );if _dbb !=nil {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0077\u0068\u0065\u006e\u0020\u0070\u0072o\u0063\u0065\u0073\u0073\u0069\u006eg\u0020\u0067\u0072\u0061\u0064\u0069\u0065\u006e\u0074\u0020\u0064\u0061\u0074a\u003a\u0020\u0025\u0076",_dbb );
break ;};if _gfa ==nil {_aaf .Log .Debug ("\u0055\u006ek\u006e\u006f\u0077n\u0020\u0067\u0072\u0061\u0064\u0069\u0065\u006e\u0074");break ;};_bb .SetFillStyle (_gfa );_bb .SetStrokeStyle (_gfa );break ;};};};_cbc ,_fbe :=_fcb .ColorspaceStroking .ColorToRGB (_fcb .ColorStroking );
if _fbe !=nil {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_fcb .ColorStroking );return nil ;};_eedf ,_ccee :=_cbc .(*_ggb .PdfColorDeviceRGB );
if !_ccee {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0063\u006f\u006e\u0076\u0065r\u0074\u0069\u006e\u0067\u0020\u0063\u006f\u006c\u006f\u0072:\u0020\u0025\u0076",_cbc );return nil ;};_bb .SetStrokeRGBA (_eedf .R (),_eedf .G (),_eedf .B (),1);
case "\u0073\u0068":if len (_be .Params )!=1{_aaf .Log .Debug ("\u0049n\u0076\u0061\u006c\u0069\u0064\u0020\u0073\u0068\u0020\u0070\u0061r\u0061\u006d\u0073\u0020\u0066\u006f\u0072\u006d\u0061\u0074");break ;};_bbbf ,_cgb :=_aa .GetName (_be .Params [0]);
if !_cgb {_aaf .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020g\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0073\u0068a\u0064\u0069\u006eg\u0020n\u0061\u006d\u0065");break ;};_ffdc ,_cgb :=_ab .GetShadingByName (*_bbbf );if !_cgb {_aaf .Log .Debug ("F\u0061\u0069\u006c\u0065\u0064\u0020g\u0065\u0074\u0074\u0069\u006e\u0067\u0020\u0073\u0068a\u0064\u0069\u006eg\u0020d\u0061\u0074\u0061");
break ;};_fgbe ,_gbag ,_abd :=_bg .processShading (_bb ,_ffdc );if _abd !=nil {_aaf .Log .Debug ("\u0045\u0072\u0072\u006f\u0072\u0020\u0077\u0068\u0065\u006e\u0020\u0070\u0072\u006f\u0063\u0065\u0073\u0073\u0069\u006e\u0067\u0020\u0073\u0068a\u0064\u0069\u006e\u0067\u0020d\u0061\u0074a\u003a\u0020\u0025\u0076",_abd );
break ;};if _fgbe ==nil {_aaf .Log .Debug ("\u0055\u006ek\u006e\u006f\u0077n\u0020\u0067\u0072\u0061\u0064\u0069\u0065\u006e\u0074");break ;};_ega ,_abd :=_gbag .ToFloat64Array ();if _abd !=nil {_aaf .Log .Debug ("\u0045\u0072r\u006f\u0072\u0020\u0070\u0061\u0072\u0073\u0069\u006e\u0067\u0020\u0063\u006f\u006f\u0072\u0064\u0069\u006e\u0061\u0074\u0065\u0073: \u0025\u0076",_abd );
break ;};_bb .DrawRectangle (_ega [0],_ega [1],_ega [2],_ega [3]);_bb .NewSubPath ();_bb .SetFillStyle (_fgbe );_bb .SetStrokeStyle (_fgbe );_bb .Fill ();case "\u0044\u006f":if len (_be .Params )!=1{return _eec ;};_dce ,_efc :=_aa .GetName (_be .Params [0]);
if !_efc {return _gb ;};_ ,_dea :=_ab .GetXObjectByName (*_dce );switch _dea {case _ggb .XObjectTypeImage :_aaf .Log .Debug ("\u0058\u004f\u0062\u006a\u0065\u0063\u0074\u0020\u0069\u006d\u0061\u0067e\u003a\u0020\u0025\u0073",_dce .String ());_ea ,_fba :=_ab .GetXObjectImageByName (*_dce );
if _fba !=nil {return _fba ;};_cfb ,_fba :=_ea .ToImage ();if _fba !=nil {_aaf .Log .Debug ("\u0052\u0065\u006e\u0064\u0065\u0072\u0069\u006e\u0067\u0020\u0072\u0065\u0073\u0075\u006c\u0074\u0020\u006day\u0020b\u0065\u0020\u0069\u006e\u0063\u006f\u006d\u0070\u006c\u0065\u0074\u0065.\u0020\u0049\u006d\u0061\u0067\u0065\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0073\u0069\u006f\u006e \u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0076",_fba );
return nil ;};if _daac :=_ea .ColorSpace ;_daac !=nil {var _dad bool ;switch _daac .(type ){case *_ggb .PdfColorspaceSpecialIndexed :_dad =true ;};if _dad {if _bae ,_deac :=_daac .ImageToRGB (*_cfb );_deac !=nil {_aaf .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0063\u006fnv\u0065r\u0074\u0020\u0069\u006d\u0061\u0067\u0065\u0020\u0074\u006f\u0020\u0052G\u0042\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020i\u006e\u0063\u006f\u0072\u0072\u0065\u0063\u0074\u002e");
}else {_cfb =&_bae ;};};};_aadc :=_bb .FillPattern ().ColorAt (0,0);var _baf _gg .Image ;if _ea .Mask !=nil {if _baf ,_fba =_ccf (_ea .Mask ,_aadc );_fba !=nil {_aaf .Log .Debug ("\u0057\u0041\u0052\u004e\u003a \u0063\u006f\u0075\u006c\u0064 \u006eo\u0074\u0020\u0067\u0065\u0074\u0020\u0065\u0078\u0070\u006c\u0069\u0063\u0069\u0074\u0020\u0069\u006d\u0061\u0067e\u0020\u006d\u0061\u0073\u006b\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063o\u0072\u0072\u0065\u0063\u0074\u002e");
};}else if _ea .SMask !=nil {if _baf ,_fba =_agfe (_ea .SMask ,_aadc );_fba !=nil {_aaf .Log .Debug ("W\u0041\u0052\u004e\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0067\u0065\u0074\u0020\u0073\u006f\u0066\u0074\u0020\u0069\u006da\u0067e\u0020\u006d\u0061\u0073k\u002e\u0020O\u0075\u0074\u0070\u0075\u0074\u0020\u006d\u0061\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063\u0074\u002e");
};};var _ebdc _gg .Image ;if _deb ,_ :=_aa .GetBoolVal (_ea .ImageMask );_deb {_ebdc =_cdeb (_cfb ,_aadc );}else {_ebdc ,_fba =_cfb .ToGoImage ();if _fba !=nil {_aaf .Log .Debug ("\u0052\u0065\u006e\u0064\u0065\u0072\u0069\u006e\u0067\u0020\u0072\u0065\u0073\u0075\u006c\u0074\u0020\u006day\u0020b\u0065\u0020\u0069\u006e\u0063\u006f\u006d\u0070\u006c\u0065\u0074\u0065.\u0020\u0049\u006d\u0061\u0067\u0065\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0073\u0069\u006f\u006e \u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0076",_fba );
return nil ;};};if _baf !=nil {_ebdc =_baeee (_ebdc ,_baf );};_afe :=_ebdc .Bounds ();_bb .Push ();_bb .Scale (1.0/float64 (_afe .Dx ()),-1.0/float64 (_afe .Dy ()));_bb .DrawImageAnchored (_ebdc ,0,0,0,1);_bb .Pop ();case _ggb .XObjectTypeForm :_aaf .Log .Debug ("\u0058\u004fb\u006a\u0065\u0063t\u0020\u0066\u006f\u0072\u006d\u003a\u0020\u0025\u0073",_dce .String ());
_ced ,_dbd :=_ab .GetXObjectFormByName (*_dce );if _dbd !=nil {return _dbd ;};_acf ,_dbd :=_ced .GetContentStream ();if _dbd !=nil {return _dbd ;};_geb :=_ced .Resources ;if _geb ==nil {_geb =_ab ;};_bb .Push ();if _ced .Matrix !=nil {_dcae ,_gad :=_aa .GetArray (_ced .Matrix );
if !_gad {return _gb ;};_bbdf ,_cfg :=_aa .GetNumbersAsFloat (_dcae .Elements ());if _cfg !=nil {return _cfg ;};if len (_bbdf )!=6{return _eec ;};_cbcf :=_fb .NewMatrix (_bbdf [0],_bbdf [1],_bbdf [2],_bbdf [3],_bbdf [4],_bbdf [5]);_bb .SetMatrix (_bb .Matrix ().Mult (_cbcf ));
};if _ced .BBox !=nil {_fef ,_cag :=_aa .GetArray (_ced .BBox );if !_cag {return _gb ;};_cdeg ,_faf :=_aa .GetNumbersAsFloat (_fef .Elements ());if _faf !=nil {return _faf ;};if len (_cdeg )!=4{_aaf .Log .Debug ("\u004c\u0065\u006e\u0020\u003d\u0020\u0025\u0064",len (_cdeg ));
return _eec ;};_bb .DrawRectangle (_cdeg [0],_cdeg [1],_cdeg [2]-_cdeg [0],_cdeg [3]-_cdeg [1]);_bb .SetRGBA (1,0,0,1);_bb .Clip ();}else {_aaf .Log .Debug ("\u0045R\u0052\u004fR\u003a\u0020\u0052\u0065q\u0075\u0069\u0072e\u0064\u0020\u0042\u0042\u006f\u0078\u0020\u006d\u0069ss\u0069\u006e\u0067 \u006f\u006e \u0058\u004f\u0062\u006a\u0065\u0063t\u0020\u0046o\u0072\u006d");
};_dbd =_bg .renderContentStream (_bb ,string (_acf ),_geb );if _dbd !=nil {return _dbd ;};_bb .Pop ();};case "\u0042\u0049":if len (_be .Params )!=1{return _eec ;};_agf ,_ffc :=_be .Params [0].(*_eg .ContentStreamInlineImage );if !_ffc {return nil ;};
_baeb ,_bfca :=_agf .ToImage (_ab );if _bfca !=nil {_aaf .Log .Debug ("\u0052\u0065\u006e\u0064\u0065\u0072\u0069\u006e\u0067\u0020\u0072\u0065\u0073\u0075\u006c\u0074\u0020\u006day\u0020b\u0065\u0020\u0069\u006e\u0063\u006f\u006d\u0070\u006c\u0065\u0074\u0065.\u0020\u0049\u006d\u0061\u0067\u0065\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0073\u0069\u006f\u006e \u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0076",_bfca );
return nil ;};_gfe ,_bfca :=_baeb .ToGoImage ();if _bfca !=nil {_aaf .Log .Debug ("\u0052\u0065\u006e\u0064\u0065\u0072\u0069\u006e\u0067\u0020\u0072\u0065\u0073\u0075\u006c\u0074\u0020\u006day\u0020b\u0065\u0020\u0069\u006e\u0063\u006f\u006d\u0070\u006c\u0065\u0074\u0065.\u0020\u0049\u006d\u0061\u0067\u0065\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0073\u0069\u006f\u006e \u0065\u0072\u0072\u006f\u0072\u003a\u0020\u0025\u0076",_bfca );
return nil ;};_dabd :=_gfe .Bounds ();_bb .Push ();_bb .Scale (1.0/float64 (_dabd .Dx ()),-1.0/float64 (_dabd .Dy ()));_bb .DrawImageAnchored (_gfe ,0,0,0,1);_bb .Pop ();case "\u0042\u0054":_gf .Reset ();case "\u0045\u0054":_gf .Reset ();case "\u0054\u0072":if len (_be .Params )!=1{return _eec ;
};_fbf ,_ebad :=_aa .GetNumberAsFloat (_be .Params [0]);if _ebad !=nil {return _ebad ;};_gf .Tr =_fe .TextRenderingMode (_fbf );case "\u0054\u004c":if len (_be .Params )!=1{return _eec ;};_efb ,_befc :=_aa .GetNumberAsFloat (_be .Params [0]);if _befc !=nil {return _befc ;
};_gf .Tl =_efb ;case "\u0054\u0063":if len (_be .Params )!=1{return _eec ;};_dae ,_eda :=_aa .GetNumberAsFloat (_be .Params [0]);if _eda !=nil {return _eda ;};_aaf .Log .Debug ("\u0054\u0063\u003a\u0020\u0025\u0076",_dae );_gf .Tc =_dae ;case "\u0054\u0077":if len (_be .Params )!=1{return _eec ;
};_fafg ,_dceg :=_aa .GetNumberAsFloat (_be .Params [0]);if _dceg !=nil {return _dceg ;};_aaf .Log .Debug ("\u0054\u0077\u003a\u0020\u0025\u0076",_fafg );_gf .Tw =_fafg ;case "\u0054\u007a":if len (_be .Params )!=1{return _eec ;};_cba ,_edc :=_aa .GetNumberAsFloat (_be .Params [0]);
if _edc !=nil {return _edc ;};_gf .Th =_cba ;case "\u0054\u0073":if len (_be .Params )!=1{return _eec ;};_aab ,_cdb :=_aa .GetNumberAsFloat (_be .Params [0]);if _cdb !=nil {return _cdb ;};_gf .Ts =_aab ;case "\u0054\u0064":if len (_be .Params )!=2{return _eec ;
};_egb ,_decf :=_aa .GetNumbersAsFloat (_be .Params );if _decf !=nil {return _decf ;};_aaf .Log .Debug ("\u0054\u0064\u003a\u0020\u0025\u0076",_egb );_gf .ProcTd (_egb [0],_egb [1]);case "\u0054\u0044":if len (_be .Params )!=2{return _eec ;};_cbaa ,_bdd :=_aa .GetNumbersAsFloat (_be .Params );
if _bdd !=nil {return _bdd ;};_aaf .Log .Debug ("\u0054\u0044\u003a\u0020\u0025\u0076",_cbaa );_gf .ProcTD (_cbaa [0],_cbaa [1]);case "\u0054\u002a":_gf .ProcTStar ();case "\u0054\u006d":if len (_be .Params )!=6{return _eec ;};_ccga ,_caed :=_aa .GetNumbersAsFloat (_be .Params );
if _caed !=nil {return _caed ;};_aaf .Log .Debug ("\u0054\u0065x\u0074\u0020\u006da\u0074\u0072\u0069\u0078\u003a\u0020\u0025\u002b\u0076",_ccga );_gf .ProcTm (_ccga [0],_ccga [1],_ccga [2],_ccga [3],_ccga [4],_ccga [5]);case "\u0027":if len (_be .Params )!=1{return _eec ;
};_bba ,_aaea :=_aa .GetStringBytes (_be .Params [0]);if !_aaea {return _gb ;};_aaf .Log .Debug ("\u0027\u0020\u0073t\u0072\u0069\u006e\u0067\u003a\u0020\u0025\u0073",string (_bba ));_gf .ProcQ (_bba ,_bb );case "\u0022":if len (_be .Params )!=3{return _eec ;
};_bfd ,_cgc :=_aa .GetNumberAsFloat (_be .Params [0]);if _cgc !=nil {return _cgc ;};_agad ,_cgc :=_aa .GetNumberAsFloat (_be .Params [1]);if _cgc !=nil {return _cgc ;};_fdb ,_ccge :=_aa .GetStringBytes (_be .Params [2]);if !_ccge {return _gb ;};_gf .ProcDQ (_fdb ,_bfd ,_agad ,_bb );
case "\u0054\u006a":if len (_be .Params )!=1{return _eec ;};_debf ,_aafe :=_aa .GetStringBytes (_be .Params [0]);if !_aafe {return _gb ;};_aaf .Log .Debug ("\u0054j\u0020s\u0074\u0072\u0069\u006e\u0067\u003a\u0020\u0060\u0025\u0073\u0060",string (_debf ));
_gf .ProcTj (_debf ,_bb );case "\u0054\u004a":if len (_be .Params )!=1{return _eec ;};_aaa ,_dbg :=_aa .GetArray (_be .Params [0]);if !_dbg {_aaf .Log .Debug ("\u0054\u0079\u0070\u0065\u003a\u0020\u0025\u0054",_aaa );return _gb ;};_aaf .Log .Debug ("\u0054\u004a\u0020\u0061\u0072\u0072\u0061\u0079\u003a\u0020\u0025\u002b\u0076",_aaa );
for _ ,_cef :=range _aaa .Elements (){switch _fbda :=_cef .(type ){case *_aa .PdfObjectString :if _fbda !=nil {_gf .ProcTj (_fbda .Bytes (),_bb );};case *_aa .PdfObjectFloat ,*_aa .PdfObjectInteger :_bff ,_cgg :=_aa .GetNumberAsFloat (_fbda );if _cgg ==nil {_gf .Translate (-_bff *0.001*_gf .Tf .Size *_gf .Th /100.0,0);
};};};case "\u0054\u0066":if len (_be .Params )!=2{return _eec ;};_aaf .Log .Debug ("\u0025\u0023\u0076",_be .Params );_acgac ,_feff :=_aa .GetName (_be .Params [0]);if !_feff ||_acgac ==nil {_aaf .Log .Debug ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0066\u006f\u006e\u0074\u0020\u006e\u0061m\u0065 \u006f\u0062\u006a\u0065\u0063\u0074\u003a \u0025\u0076",_be .Params [0]);
return _gb ;};_aaf .Log .Debug ("\u0046\u006f\u006e\u0074\u0020\u006e\u0061\u006d\u0065\u003a\u0020\u0025\u0073",_acgac .String ());_gcg ,_eef :=_aa .GetNumberAsFloat (_be .Params [1]);if _eef !=nil {_aaf .Log .Debug ("\u0069\u006e\u0076\u0061l\u0069\u0064\u0020\u0066\u006f\u006e\u0074\u0020\u0073\u0069z\u0065 \u006f\u0062\u006a\u0065\u0063\u0074\u003a \u0025\u0076",_be .Params [1]);
return _gb ;};_aaf .Log .Debug ("\u0046\u006f\u006e\u0074\u0020\u0073\u0069\u007a\u0065\u003a\u0020\u0025\u0076",_gcg );_gec ,_gggb :=_ab .GetFontByName (*_acgac );if !_gggb {_aaf .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0046\u006f\u006e\u0074\u0020\u0025s\u0020\u006e\u006f\u0074\u0020\u0066\u006f\u0075\u006e\u0064",_acgac .String ());
return _a .New ("\u0066\u006f\u006e\u0074\u0020\u006e\u006f\u0074\u0020f\u006f\u0075\u006e\u0064");};_aaf .Log .Debug ("\u0046\u006f\u006e\u0074\u003a\u0020\u0025\u0054",_gec );_fafa ,_feff :=_aa .GetDict (_gec );if !_feff {_aaf .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075l\u0064\u0020\u006e\u006f\u0074\u0020\u0067e\u0074\u0020\u0066\u006f\u006e\u0074\u0020\u0064\u0069\u0063\u0074");
return _gb ;};_aagg ,_eef :=_ggb .NewPdfFontFromPdfObject (_fafa );if _eef !=nil {_aaf .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u006c\u006f\u0061\u0064\u0020\u0066\u006fn\u0074\u0020\u0066\u0072\u006fm\u0020\u006fb\u006a\u0065\u0063\u0074");
return _eef ;};_gag :=_aagg .BaseFont ();if _gag ==""{_gag =_acgac .String ();};_cdfd ,_feff :=_bf [_gag ];if !_feff {_cdfd ,_eef =_fe .NewTextFont (_aagg ,_gcg );if _eef !=nil {_aaf .Log .Debug ("\u0045R\u0052\u004f\u0052\u003a\u0020\u0025v",_eef );};
};if _cdfd ==nil {if len (_gag )> 7&&_gag [6]=='+'{_gag =_gag [7:];};_agaf :=[]string {_gag ,"\u0054i\u006de\u0073\u0020\u004e\u0065\u0077\u0020\u0052\u006f\u006d\u0061\u006e","\u0041\u0072\u0069a\u006c","D\u0065\u006a\u0061\u0056\u0075\u0020\u0053\u0061\u006e\u0073"};
for _ ,_efca :=range _agaf {_aaf .Log .Debug ("\u0044\u0045\u0042\u0055\u0047\u003a \u0073\u0065\u0061\u0072\u0063\u0068\u0069\u006e\u0067\u0020\u0073\u0079\u0073t\u0065\u006d\u0020\u0066\u006f\u006e\u0074 \u0060\u0025\u0073\u0060",_efca );if _cdfd ,_feff =_bf [_efca ];
_feff {break ;};_fegf :=_edg .Match (_efca );if _fegf ==nil {_aaf .Log .Debug ("c\u006f\u0075\u006c\u0064\u0020\u006eo\u0074\u0020\u0066\u0069\u006e\u0064\u0020\u0066\u006fn\u0074\u0020\u0066i\u006ce\u0020\u0025\u0073",_efca );continue ;};_cdfd ,_eef =_fe .NewTextFontFromPath (_fegf .Filename ,_gcg );
if _eef !=nil {_aaf .Log .Debug ("c\u006f\u0075\u006c\u0064\u0020\u006eo\u0074\u0020\u006c\u006f\u0061\u0064\u0020\u0066\u006fn\u0074\u0020\u0066i\u006ce\u0020\u0025\u0073",_fegf .Filename );continue ;};_aaf .Log .Debug ("\u0053\u0075\u0062\u0073\u0074\u0069t\u0075\u0074\u0069\u006e\u0067\u0020\u0066\u006f\u006e\u0074\u0020\u0025\u0073 \u0077\u0069\u0074\u0068\u0020\u0025\u0073 \u0028\u0025\u0073\u0029",_gag ,_fegf .Name ,_fegf .Filename );
_bf [_efca ]=_cdfd ;break ;};};if _cdfd ==nil {_aaf .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0063\u006f\u0075\u006c\u0064\u0020n\u006f\u0074\u0020\u0066\u0069\u006ed\u0020\u0061\u006e\u0079\u0020\u0073\u0075\u0069\u0074\u0061\u0062\u006c\u0065 \u0066\u006f\u006e\u0074");
return _a .New ("\u0063\u006f\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0066\u0069\u006e\u0064\u0020a\u006ey\u0020\u0073\u0075\u0069\u0074\u0061\u0062\u006c\u0065\u0020\u0066\u006f\u006e\u0074");};_gf .ProcTf (_cdfd .WithSize (_gcg ,_aagg ));case "\u0042\u004d\u0043","\u0042\u0044\u0043":case "\u0045\u004d\u0043":default:_aaf .Log .Debug ("\u0045\u0052\u0052\u004f\u0052\u003a\u0020\u0075\u006e\u0073u\u0070\u0070\u006f\u0072\u0074\u0065\u0064 \u006f\u0070\u0065\u0072\u0061\u006e\u0064\u003a\u0020\u0025\u0073",_be .Operand );
};_aea =_be ;return nil ;});_cga =_bca .Process (_eeb );if _cga !=nil {return _cga ;};return nil ;};func _aeacd (_dcf *_ggb .Image ,_ace _ae .Color )_gg .Image {_gbff ,_egac :=int (_dcf .Width ),int (_dcf .Height );_baa :=_gg .NewRGBA (_gg .Rect (0,0,_gbff ,_egac ));
for _eaf :=0;_eaf < _egac ;_eaf ++{for _bfff :=0;_bfff < _gbff ;_bfff ++{_fbff ,_cggf :=_dcf .ColorAt (_bfff ,_eaf );if _cggf !=nil {_aaf .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_bfff ,_eaf );
continue ;};_cac ,_fbfde ,_fbb ,_ :=_fbff .RGBA ();var _bdbg _ae .Color ;if _cac +_fbfde +_fbb ==0{_bdbg =_ae .Transparent ;}else {_bdbg =_ace ;};_baa .Set (_bfff ,_eaf ,_bdbg );};};return _baa ;};

// PdfShadingType defines PDF shading types.
// Source: PDF32000_2008.pdf. Chapter 8.7.4.5
type PdfShadingType int64 ;

// NewImageDevice returns a new image device.
func NewImageDevice ()*ImageDevice {const _ge ="r\u0065\u006e\u0064\u0065r.\u004ee\u0077\u0049\u006d\u0061\u0067e\u0044\u0065\u0076\u0069\u0063\u0065";_fg .TrackUse (_ge );return &ImageDevice {};};func (_fbfd renderer )processGradient (_ece _fe .Context ,_bbfd *_eg .ContentStreamOperation ,_aeac *_ggb .PdfPageResources ,_cdag *_aa .PdfObjectName )(_fe .Gradient ,error ){if _fecd ,_ccaf :=_aeac .GetPatternByName (*_cdag );
_ccaf &&_fecd .IsShading (){_gdc :=_fecd .GetAsShadingPattern ().Shading ;_bccd ,_ ,_gbe :=_fbfd .processShading (_ece ,_gdc );if _gbe !=nil {return nil ,_gbe ;};return _bccd ,nil ;};return nil ,nil ;};func _gaa (_bcgg _fe .Gradient ,_gbg *_ggb .PdfFunctionType3 ,_agdc _ggb .PdfColorspace ,_dgdf []float64 )(_fe .Gradient ,error ){var _gbaf error ;
for _cgcc :=0;_cgcc < len (_gbg .Functions );_cgcc ++{if _gea ,_ebc :=_gbg .Functions [_cgcc ].(*_ggb .PdfFunctionType2 );_ebc {_bcgg ,_gbaf =_eee (_bcgg ,_gea ,_agdc ,_dgdf [_cgcc +1],_cgcc ==0);if _gbaf !=nil {return nil ,_gbaf ;};};};return _bcgg ,nil ;
};

// ImageDevice is used to render PDF pages to image targets.
type ImageDevice struct{renderer ;

// OutputWidth represents the width of the rendered images in pixels.
// The heights of the output images are calculated based on the selected
// width and the original height of each rendered page.
OutputWidth int ;};func _cdeb (_gdeg *_ggb .Image ,_ead _ae .Color )_gg .Image {_ebde ,_fab :=int (_gdeg .Width ),int (_gdeg .Height );_gfec :=_gg .NewRGBA (_gg .Rect (0,0,_ebde ,_fab ));for _fde :=0;_fde < _fab ;_fde ++{for _gca :=0;_gca < _ebde ;_gca ++{_ebb ,_defc :=_gdeg .ColorAt (_gca ,_fde );
if _defc !=nil {_aaf .Log .Debug ("\u0057\u0041\u0052\u004e\u003a\u0020\u0063o\u0075\u006c\u0064\u0020\u006e\u006f\u0074\u0020\u0072\u0065\u0074\u0072\u0069\u0065v\u0065 \u0069\u006d\u0061\u0067\u0065\u0020m\u0061\u0073\u006b\u0020\u0076\u0061\u006cu\u0065\u0020\u0061\u0074\u0020\u0028\u0025\u0064\u002c\u0020\u0025\u0064\u0029\u002e\u0020\u004f\u0075\u0074\u0070\u0075\u0074\u0020\u006da\u0079\u0020\u0062\u0065\u0020\u0069\u006e\u0063\u006f\u0072\u0072\u0065\u0063t\u002e",_gca ,_fde );
continue ;};_cfee ,_adeb ,_bgg ,_ :=_ebb .RGBA ();var _cfcg _ae .Color ;if _cfee +_adeb +_bgg ==0{_cfcg =_ead ;}else {_cfcg =_ae .Transparent ;};_gfec .Set (_gca ,_fde ,_cfcg );};};return _gfec ;};func _agfe (_ceb _aa .PdfObject ,_fbg _ae .Color )(_gg .Image ,error ){_dbdc ,_bbgb :=_aa .GetStream (_ceb );
if !_bbgb {return nil ,nil ;};_ebec ,_faca :=_ggb .NewXObjectImageFromStream (_dbdc );if _faca !=nil {return nil ,_faca ;};_cgbb ,_faca :=_ebec .ToImage ();if _faca !=nil {return nil ,_faca ;};return _aeacd (_cgbb ,_fbg ),nil ;};

// Render converts the specified PDF page into an image, flattens annotations by default and returns the result.
func (_ag *ImageDevice )Render (page *_ggb .PdfPage )(_gg .Image ,error ){return _ag .RenderWithOpts (page ,false );};

// RenderToPath converts the specified PDF page into an image and saves the
// result at the specified location.
func (_ccaa *ImageDevice )RenderToPath (page *_ggb .PdfPage ,outputPath string )error {_ff ,_caa :=_ccaa .Render (page );if _caa !=nil {return _caa ;};_af :=_g .ToLower (_e .Ext (outputPath ));if _af ==""{return _a .New ("\u0063\u006ful\u0064\u0020\u006eo\u0074\u0020\u0072\u0065cog\u006eiz\u0065\u0020\u006f\u0075\u0074\u0070\u0075t \u0066\u0069\u006c\u0065\u0020\u0074\u0079p\u0065");
};switch _af {case "\u002e\u0070\u006e\u0067":return _bfa (outputPath ,_ff );case "\u002e\u006a\u0070\u0067","\u002e\u006a\u0070e\u0067":return _ggag (outputPath ,_ff ,100);};return _dd .Errorf ("\u0075\u006e\u0072\u0065\u0063\u006fg\u006e\u0069\u007a\u0065\u0064\u0020\u006f\u0075\u0074\u0070\u0075\u0074\u0020f\u0069\u006c\u0065\u0020\u0074\u0079\u0070e\u003a\u0020\u0025\u0073",_af );
};func _bfa (_ddcc string ,_cdd _gg .Image )error {_debfa ,_gfc :=_d .Create (_ddcc );if _gfc !=nil {return _gfc ;};defer _debfa .Close ();return _fa .Encode (_debfa ,_cdd );};func (_dfg renderer )processRadialShading (_dfe _fe .Context ,_gbaa *_ggb .PdfShading )(_fe .Gradient ,*_aa .PdfObjectArray ,error ){_egf :=_gbaa .GetContext ().(*_ggb .PdfShadingType3 );
if len (_egf .Function )==0{return nil ,nil ,_a .New ("\u006e\u006f\u0020\u0067\u0072\u0061\u0064i\u0065\u006e\u0074 \u0066\u0075\u006e\u0063t\u0069\u006f\u006e\u0020\u0066\u006f\u0075\u006e\u0064\u002c\u0020\u0073\u006b\u0069\u0070\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0073\u0069\u006f\u006e");
};_adg ,_ddd :=_egf .Coords .ToFloat64Array ();if _ddd !=nil {return nil ,nil ,_a .New ("\u0066\u0061\u0069l\u0065\u0064\u0020\u0067e\u0074\u0074\u0069\u006e\u0067\u0020\u0073h\u0061\u0064\u0069\u006e\u0067\u0020\u0070\u006f\u0073\u0069\u0074\u0069\u006f\u006e");
};_cfc :=_gbaa .ColorSpace ;_bda :=_aa .MakeArrayFromFloats ([]float64 {0,0,1,1});var _aedb ,_fefb ,_ffcg ,_gaed ,_dga ,_aedg float64 ;_aedb ,_fefb =_dfe .Matrix ().Transform (_adg [0],_adg [1]);_ffcg ,_gaed =_dfe .Matrix ().Transform (_adg [3],_adg [4]);
_dga ,_ =_dfe .Matrix ().Transform (_adg [2],0);_aedg ,_ =_dfe .Matrix ().Transform (_adg [5],0);_adcb ,_ :=_dfe .Matrix ().Translation ();_dga -=_adcb ;_aedg -=_adcb ;for _faaa ,_fce :=range _adg {if _faaa ==2||_faaa ==5{continue ;};if _fce > 1.0{_gfg :=_ga .Min (_aedb -_dga ,_ffcg -_aedg );
_agcf :=_ga .Min (_fefb -_dga ,_gaed -_aedg );_afac :=_ga .Max (_aedb +_dga ,_ffcg +_aedg );_bcf :=_ga .Max (_fefb +_dga ,_gaed +_aedg );_fae :=_afac -_gfg ;_gga :=_agcf -_bcf ;_bda =_aa .MakeArrayFromFloats ([]float64 {_gfg ,_agcf ,_fae ,_gga });break ;
};};_bcda :=_cd .NewRadialGradient (_aedb ,_fefb ,_dga ,_ffcg ,_gaed ,_aedg );if _ada ,_cad :=_egf .Function [0].(*_ggb .PdfFunctionType2 );_cad {_bcda ,_ddd =_eee (_bcda ,_ada ,_cfc ,1.0,true );}else if _dcbf ,_deg :=_egf .Function [0].(*_ggb .PdfFunctionType3 );
_deg {_cdbf :=append ([]float64 {0},_dcbf .Bounds ...);_cdbf =append (_cdbf ,1.0);_bcda ,_ddd =_gaa (_bcda ,_dcbf ,_cfc ,_cdbf );};if _ddd !=nil {return nil ,nil ,_ddd ;};return _bcda ,_bda ,nil ;};func (_ede renderer )processLinearShading (_egag _fe .Context ,_gfad *_ggb .PdfShading )(_fe .Gradient ,*_aa .PdfObjectArray ,error ){_adfc :=_gfad .GetContext ().(*_ggb .PdfShadingType2 );
if len (_adfc .Function )==0{return nil ,nil ,_a .New ("\u006e\u006f\u0020\u0067\u0072\u0061\u0064i\u0065\u006e\u0074 \u0066\u0075\u006e\u0063t\u0069\u006f\u006e\u0020\u0066\u006f\u0075\u006e\u0064\u002c\u0020\u0073\u006b\u0069\u0070\u0020\u0063\u006f\u006e\u0076\u0065\u0072\u0073\u0069\u006f\u006e");
};_edb ,_beec :=_adfc .Coords .ToFloat64Array ();if _beec !=nil {return nil ,nil ,_a .New ("\u0066\u0061\u0069l\u0065\u0064\u0020\u0067e\u0074\u0074\u0069\u006e\u0067\u0020\u0073h\u0061\u0064\u0069\u006e\u0067\u0020\u0070\u006f\u0073\u0069\u0074\u0069\u006f\u006e");
};_aeacb :=_gfad .ColorSpace ;_caedd ,_ddc :=_egag .Matrix ().Transform (_edb [0],_edb [1]);_fcfe ,_daff :=_egag .Matrix ().Transform (_edb [2],_edb [3]);_ccab :=_cd .NewLinearGradient (_caedd ,_ddc ,_fcfe ,_daff );_edcd :=_aa .MakeArrayFromFloats ([]float64 {0,0,1,1});
for _ ,_efaa :=range _edb {if _efaa > 1{_edcd =_adfc .Coords ;break ;};};if _ccb ,_bbdd :=_adfc .Function [0].(*_ggb .PdfFunctionType2 );_bbdd {_ccab ,_beec =_eee (_ccab ,_ccb ,_aeacb ,1.0,true );}else if _bbdfe ,_bfeb :=_adfc .Function [0].(*_ggb .PdfFunctionType3 );
_bfeb {_gafg :=append ([]float64 {0},_bbdfe .Bounds ...);_gafg =append (_gafg ,1.0);_ccab ,_beec =_gaa (_ccab ,_bbdfe ,_aeacb ,_gafg );};return _ccab ,_edcd ,_beec ;};func _ccf (_gdge _aa .PdfObject ,_ebf _ae .Color )(_gg .Image ,error ){_ebbg ,_decfb :=_aa .GetStream (_gdge );
if !_decfb {return nil ,nil ;};_ddca ,_eccc :=_ggb .NewXObjectImageFromStream (_ebbg );if _eccc !=nil {return nil ,_eccc ;};_geba ,_eccc :=_ddca .ToImage ();if _eccc !=nil {return nil ,_eccc ;};return _cdeb (_geba ,_ebf ),nil ;};const (ShadingTypeFunctionBased PdfShadingType =1;
ShadingTypeAxial PdfShadingType =2;ShadingTypeRadial PdfShadingType =3;ShadingTypeFreeForm PdfShadingType =4;ShadingTypeLatticeForm PdfShadingType =5;ShadingTypeCoons PdfShadingType =6;ShadingTypeTensorProduct PdfShadingType =7;);func (_adf renderer )processShading (_dfb _fe .Context ,_cgaf *_ggb .PdfShading )(_fe .Gradient ,*_aa .PdfObjectArray ,error ){_beeg :=int64 (*_cgaf .ShadingType );
if _beeg ==int64 (ShadingTypeAxial ){return _adf .processLinearShading (_dfb ,_cgaf );}else if _beeg ==int64 (ShadingTypeRadial ){return _adf .processRadialShading (_dfb ,_cgaf );}else {_aaf .Log .Debug (_dd .Sprintf ("\u0050r\u006f\u0063e\u0073\u0073\u0069n\u0067\u0020\u0067\u0072\u0061\u0064\u0069e\u006e\u0074\u0020\u0074\u0079\u0070e\u0020\u0025\u0064\u0020\u006e\u006f\u0074\u0020\u0079\u0065\u0074 \u0073\u0075\u0070\u0070\u006f\u0072\u0074\u0065\u0064",_beeg ));
};return nil ,nil ,nil ;};func _dddf (_agdd ,_ebce ,_cfcgg float64 )_gd .BoundingBox {return _gd .Path {Points :[]_gd .Point {_gd .NewPoint (0,0).Rotate (_cfcgg ),_gd .NewPoint (_agdd ,0).Rotate (_cfcgg ),_gd .NewPoint (0,_ebce ).Rotate (_cfcgg ),_gd .NewPoint (_agdd ,_ebce ).Rotate (_cfcgg )}}.GetBoundingBox ();
};

// RenderWithOpts converts the specified PDF page into an image, optionally flattens annotations and returns the result.
func (_cc *ImageDevice )RenderWithOpts (page *_ggb .PdfPage ,skipFlattening bool )(_gg .Image ,error ){_ba ,_cce :=page .GetMediaBox ();if _cce !=nil {return nil ,_cce ;};_ba .Normalize ();_fc :=page .CropBox ;var _aae ,_ca float64 ;if _fc !=nil {_fc .Normalize ();
_aae ,_ca =_fc .Width (),_fc .Height ();};_egc :=page .Rotate ;_ec ,_ccg ,_feb ,_ce :=_ba .Llx ,_ba .Lly ,_ba .Width (),_ba .Height ();_cg :=_fb .IdentityMatrix ();if _egc !=nil &&*_egc %360!=0&&*_egc %90==0{_dg :=-float64 (*_egc );_bc :=_dddf (_feb ,_ce ,_dg );
_cg =_cg .Translate ((_bc .Width -_feb )/2+_feb /2,(_bc .Height -_ce )/2+_ce /2).Rotate (_dg *_ga .Pi /180).Translate (-_feb /2,-_ce /2);_feb ,_ce =_bc .Width ,_bc .Height ;if _fc !=nil {_dc :=_dddf (_aae ,_ca ,_dg );_aae ,_ca =_dc .Width ,_dc .Height ;
};};if _ec !=0||_ccg !=0{_cg =_cg .Translate (-_ec ,-_ccg );};_cc ._fbd =1.0;if _cc .OutputWidth !=0{_cca :=_feb ;if _fc !=nil {_cca =_aae ;};_cc ._fbd =float64 (_cc .OutputWidth )/_cca ;_feb ,_ce ,_aae ,_ca =_feb *_cc ._fbd ,_ce *_cc ._fbd ,_aae *_cc ._fbd ,_ca *_cc ._fbd ;
_cg =_fb .ScaleMatrix (_cc ._fbd ,_cc ._fbd ).Mult (_cg );};_aag :=_cd .NewContext (int (_feb ),int (_ce ));if _fec :=_cc .renderPage (_aag ,page ,_cg ,skipFlattening );_fec !=nil {return nil ,_fec ;};_ee :=_aag .Image ();if _fc !=nil {_cf ,_gae :=(_fc .Llx -_ec )*_cc ._fbd ,(_fc .Lly -_ccg )*_cc ._fbd ;
_eed :=_gg .Rect (0,0,int (_aae ),int (_ca ));_ed :=_gg .Pt (int (_cf ),int (_ce -_gae -_ca ));_dgg :=_gg .NewRGBA (_eed );_f .Draw (_dgg ,_eed ,_ee ,_ed ,_f .Src );_ee =_dgg ;};return _ee ,nil ;};